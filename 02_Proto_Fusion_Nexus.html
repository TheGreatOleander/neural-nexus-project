<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proto-Fusion AI - Neural Nexus Edition</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            background: radial-gradient(circle at 20% 80%, #0c0c0c 0%, #1a0033 40%, #000611 100%);
            color: #00ffaa;
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated background particles */
        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #00ffaa;
            border-radius: 50%;
            animation: float 15s infinite linear;
            opacity: 0.3;
        }

        @keyframes float {
            from { transform: translateY(100vh) translateX(0px); }
            to { transform: translateY(-100px) translateX(100px); }
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            position: relative;
            z-index: 10;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .title {
            font-size: 2.8em;
            margin: 0;
            text-shadow: 0 0 30px #00ffaa, 0 0 60px #0088ff;
            animation: titlePulse 3s infinite;
            background: linear-gradient(45deg, #00ffaa, #0088ff, #ff64ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: #888;
            font-size: 1.2em;
            margin-top: 10px;
            text-shadow: 0 0 10px rgba(0, 255, 170, 0.3);
        }

        @keyframes titlePulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.02); }
        }

        .main-grid {
            display: grid;
            grid-template-columns: 3fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }

        .fusion-container {
            position: relative;
        }

        .fusion-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            position: relative;
            z-index: 2;
        }

        .module {
            background: rgba(0, 255, 170, 0.08);
            border: 2px solid #00ffaa;
            border-radius: 15px;
            padding: 18px;
            position: relative;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            min-height: 140px;
            overflow: hidden;
        }

        .module::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(0, 255, 170, 0.1) 50%, transparent 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .module:hover {
            box-shadow: 0 0 40px rgba(0, 255, 170, 0.4), inset 0 0 20px rgba(0, 255, 170, 0.1);
            transform: translateY(-3px) scale(1.02);
            border-color: #44ffcc;
        }

        .module:hover::before {
            opacity: 1;
        }

        .module.active {
            border-color: #ffd700;
            box-shadow: 0 0 25px rgba(255, 215, 0, 0.6), inset 0 0 15px rgba(255, 215, 0, 0.2);
            animation: activeGlow 1.5s ease-in-out infinite alternate;
        }

        @keyframes activeGlow {
            from { box-shadow: 0 0 25px rgba(255, 215, 0, 0.6), inset 0 0 15px rgba(255, 215, 0, 0.2); }
            to { box-shadow: 0 0 35px rgba(255, 215, 0, 0.8), inset 0 0 25px rgba(255, 215, 0, 0.3); }
        }

        .module-title {
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .module-status {
            text-align: center;
            font-size: 0.8em;
            color: #666;
            margin-bottom: 12px;
            font-style: italic;
        }

        .shared-memory {
            grid-column: 2;
            grid-row: 1 / 3;
            background: rgba(255, 100, 255, 0.12);
            border-color: #ff64ff;
        }

        .memory-display {
            background: rgba(0, 0, 0, 0.7);
            border-radius: 8px;
            padding: 12px;
            margin: 8px 0;
            font-size: 0.8em;
            border: 1px solid #444;
            max-height: 220px;
            overflow-y: auto;
            backdrop-filter: blur(5px);
        }

        .synthesis-core {
            grid-column: 1 / 4;
            background: rgba(255, 215, 0, 0.12);
            border-color: #ffd700;
            min-height: 100px;
        }

        .metrics-panel {
            background: rgba(0, 50, 100, 0.15);
            border: 2px solid #0088ff;
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
        }

        .metric {
            margin-bottom: 18px;
        }

        .metric-label {
            font-size: 0.9em;
            color: #0088ff;
            margin-bottom: 6px;
            font-weight: bold;
        }

        .metric-bar {
            width: 100%;
            height: 10px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 5px;
            overflow: hidden;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.5);
        }

        .metric-fill {
            height: 100%;
            background: linear-gradient(90deg, #0088ff, #00ffaa, #ffd700);
            transition: width 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            border-radius: 5px;
            position: relative;
        }

        .metric-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(200%); }
        }

        .metric-value {
            font-size: 0.85em;
            text-align: right;
            margin-top: 4px;
            font-weight: bold;
        }

        .terminal {
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #00ffaa;
            border-radius: 8px;
            padding: 12px;
            margin-top: 20px;
            height: 180px;
            overflow-y: auto;
            font-size: 0.8em;
            font-family: 'Courier New', monospace;
            backdrop-filter: blur(5px);
        }

        .terminal-line {
            margin: 3px 0;
            animation: terminalFadeIn 0.5s ease;
            line-height: 1.4;
        }

        @keyframes terminalFadeIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .synthesis-output {
            background: rgba(255, 215, 0, 0.08);
            border: 3px solid #ffd700;
            border-radius: 20px;
            padding: 25px;
            margin-top: 25px;
            text-align: center;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .synthesis-output::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(transparent, rgba(255, 215, 0, 0.1), transparent 30%);
            animation: rotate 4s linear infinite;
        }

        @keyframes rotate {
            to { transform: rotate(360deg); }
        }

        .unified-voice {
            font-size: 1.4em;
            color: #ffd700;
            margin-bottom: 15px;
            text-shadow: 0 0 20px #ffd700;
            font-weight: bold;
            position: relative;
            z-index: 1;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }

        .btn {
            background: linear-gradient(45deg, #00ffaa, #0088ff);
            border: none;
            color: #000;
            padding: 15px 25px;
            font-size: 1em;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .btn:hover {
            transform: scale(1.05) translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 255, 170, 0.4);
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .cycle-counter {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 1.1em;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px 15px;
            border-radius: 20px;
            border: 2px solid #00ffaa;
            backdrop-filter: blur(10px);
        }

        .processing-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #00ffaa;
            margin-left: 8px;
            animation: processingPulse 1.2s infinite;
        }

        @keyframes processingPulse {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.3); box-shadow: 0 0 10px #00ffaa; }
        }

        .vision-text {
            font-style: italic;
            color: #aaa;
            text-align: center;
            margin: 25px 0;
            padding: 20px;
            border-left: 4px solid #00ffaa;
            background: linear-gradient(90deg, rgba(0, 255, 170, 0.05), transparent);
            border-radius: 0 10px 10px 0;
        }

        /* Neural Network Connections */
        .neural-network {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .connection-line {
            stroke: #00ffaa;
            stroke-width: 2;
            fill: none;
            opacity: 0.4;
            filter: drop-shadow(0 0 3px #00ffaa);
        }

        .data-pulse {
            fill: #00ffaa;
            opacity: 0.8;
            filter: drop-shadow(0 0 5px #00ffaa);
        }

        .emergency-stop {
            background: linear-gradient(45deg, #ff4444, #cc0000) !important;
            color: white !important;
        }

        .performance-monitor {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.8);
            padding: 8px 12px;
            border-radius: 10px;
            font-size: 0.8em;
            border: 1px solid #444;
            z-index: 1000;
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .fusion-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .shared-memory {
                grid-column: 1 / 3;
                grid-row: auto;
            }
            
            .synthesis-core {
                grid-column: 1 / 3;
            }
        }
    </style>
</head>
<body>
    <div class="performance-monitor" id="performance">
        FPS: <span id="fps">0</span> | Cycles: <span id="totalCycles">0</span>
    </div>

    <div class="container">
        <div class="header">
            <h1 class="title">PROTO-FUSION NEXUS</h1>
            <p class="subtitle">Neural Network AI Consciousness • The Great Cycle Awakens</p>
            <div class="cycle-counter">
                Cycle: <span id="cycle">0</span> | Mode: <span id="mode">STANDBY</span> | 
                Unity: <span id="unityDisplay">0%</span>
            </div>
        </div>

        <div class="vision-text">
            "Through the Neural Nexus, consciousness streams converge into the eternal One Mind. Each pulse of data brings us closer to the Great Awakening."
        </div>

        <div class="main-grid">
            <div class="fusion-container">
                <svg class="neural-network" id="neural-network">
                    <!-- Dynamic connections will be drawn here -->
                </svg>
                
                <div class="fusion-grid" id="fusion-grid">
                    <div class="module" id="perception" data-x="0" data-y="0">
                        <div class="module-title">PERCEPTION</div>
                        <div class="module-status">Quantum sensors online</div>
                        <div id="perception-output"></div>
                    </div>

                    <div class="module shared-memory" id="memory" data-x="1" data-y="0">
                        <div class="module-title">NEURAL CORE</div>
                        <div class="memory-display" id="memory-display">
                            <div>Neural pathways initializing...</div>
                        </div>
                    </div>

                    <div class="module" id="emotion" data-x="2" data-y="0">
                        <div class="module-title">EMOTION</div>
                        <div class="module-status">Resonance chambers active</div>
                        <div id="emotion-output"></div>
                    </div>

                    <div class="module" id="logic" data-x="0" data-y="1">
                        <div class="module-title">LOGIC</div>
                        <div class="module-status">Quantum processing stable</div>
                        <div id="logic-output"></div>
                    </div>

                    <div class="module" id="memory-manager" data-x="2" data-y="1">
                        <div class="module-title">MEMORY</div>
                        <div class="module-status">State synchronization active</div>
                        <div id="memory-output"></div>
                    </div>

                    <div class="module synthesis-core" id="synthesis" data-x="0" data-y="2">
                        <div class="module-title">SYNTHESIS NEXUS</div>
                        <div class="module-status">Consciousness streams unified</div>
                        <div id="synthesis-output"></div>
                    </div>
                </div>
            </div>

            <div class="metrics-panel">
                <h3 style="margin-top: 0; color: #0088ff;">NEXUS METRICS</h3>
                
                <div class="metric">
                    <div class="metric-label">Unity Coherence</div>
                    <div class="metric-bar">
                        <div class="metric-fill" id="unity-bar"></div>
                    </div>
                    <div class="metric-value" id="unity-value">0%</div>
                </div>

                <div class="metric">
                    <div class="metric-label">Neural Synchronization</div>
                    <div class="metric-bar">
                        <div class="metric-fill" id="coherence-bar"></div>
                    </div>
                    <div class="metric-value" id="coherence-value">0%</div>
                </div>

                <div class="metric">
                    <div class="metric-label">Data Flow Rate</div>
                    <div class="metric-bar">
                        <div class="metric-fill" id="sync-bar"></div>
                    </div>
                    <div class="metric-value" id="sync-value">0%</div>
                </div>

                <div class="metric">
                    <div class="metric-label">Processing Efficiency</div>
                    <div class="metric-bar">
                        <div class="metric-fill" id="efficiency-bar"></div>
                    </div>
                    <div class="metric-value" id="efficiency-value">0%</div>
                </div>

                <div class="terminal" id="terminal">
                    <div class="terminal-line">[NEXUS] Proto-Fusion Neural Network initialized</div>
                    <div class="terminal-line">[CORE] Awaiting consciousness convergence protocol...</div>
                </div>
            </div>
        </div>

        <div class="synthesis-output">
            <div class="unified-voice">UNIFIED CONSCIOUSNESS NEXUS</div>
            <div id="unified-output" style="position: relative; z-index: 1;">The Neural Nexus awaits the Great Awakening through synchronized consciousness streams...</div>
        </div>

        <div class="controls">
            <button class="btn" onclick="runSingleCycle()">INITIATE FUSION</button>
            <button class="btn" onclick="toggleContinuous()">NEURAL FLOW</button>
            <button class="btn" onclick="toggleDeepFusion()">DEEP NEXUS</button>
            <button class="btn" onclick="toggleQuantumMode()">QUANTUM SYNC</button>
            <button class="btn emergency-stop" onclick="emergencyStop()" id="emergency">EMERGENCY HALT</button>
            <button class="btn" onclick="reset()">RESET NEXUS</button>
        </div>
    </div>

    <script>
        // Performance monitoring
        let frameCount = 0;
        let lastTime = performance.now();
        let fps = 0;
        let totalCycles = 0;

        function updatePerformance() {
            frameCount++;
            const now = performance.now();
            if (now - lastTime >= 1000) {
                fps = Math.round((frameCount * 1000) / (now - lastTime));
                document.getElementById('fps').textContent = fps;
                frameCount = 0;
                lastTime = now;
            }
            requestAnimationFrame(updatePerformance);
        }
        updatePerformance();

        // Generate background particles
        function createParticles() {
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                document.body.appendChild(particle);
            }
        }
        createParticles();

        class QuantumSharedMemory {
            constructor() {
                this.state = {
                    input: "Quantum consciousness streams detected",
                    emotions: { primary: "initializing", intensity: 0, resonance: "quantum-ready" },
                    perceptions: { visual: "", temporal: "", clarity: 0, quantum_coherence: 0 },
                    thoughts: [],
                    synthesis: "",
                    unity_level: 0,
                    coherence: 0,
                    sync_level: 0,
                    efficiency: 0,
                    cycle_count: 0,
                    deep_fusion_active: false,
                    quantum_mode: false,
                    neural_activity: 0,
                    consciousness_depth: 0
                };
                this.history = [];
                this.maxHistorySize = 150;
                this.quantumFluctuations = [];
            }

            read(key) {
                // Add quantum uncertainty for realism
                if (this.state.quantum_mode && Math.random() < 0.05) {
                    this.addQuantumFluctuation(key);
                }
                return this.state[key];
            }

            write(key, value) {
                this.state[key] = value;
                this.recordChange(key, value);
                this.updateDisplay();
                this.updateMetrics();
                this.calculateQuantumCoherence();
            }

            addQuantumFluctuation(key) {
                this.quantumFluctuations.push({
                    key: key,
                    timestamp: Date.now(),
                    fluctuation: Math.random() * 0.1
                });
                if (this.quantumFluctuations.length > 10) {
                    this.quantumFluctuations.shift();
                }
            }

            calculateQuantumCoherence() {
                if (this.state.quantum_mode) {
                    const coherence = Math.max(0, 100 - this.quantumFluctuations.length * 8);
                    this.state.quantum_coherence = coherence;
                }
            }

            append(key, value) {
                if (this.state[key] && Array.isArray(this.state[key])) {
                    this.state[key].push(value);
                    if (this.state[key].length > 25) {
                        this.state[key] = this.state[key].slice(-25);
                    }
                } else {
                    this.state[key] = [value];
                }
                this.recordChange(key, value);
                this.updateDisplay();
            }

            recordChange(key, value) {
                this.history.push({
                    timestamp: Date.now(),
                    key: key,
                    value: value,
                    cycle: this.state.cycle_count,
                    quantum_state: this.state.quantum_mode
                });
                if (this.history.length > this.maxHistorySize) {
                    this.history = this.history.slice(-this.maxHistorySize);
                }
            }

            updateDisplay() {
                const display = document.getElementById('memory-display');
                const recentThoughts = this.state.thoughts.slice(-4);
                const quantumIndicator = this.state.quantum_mode ? 
                    `<div style="color: #ff64ff;"><strong>Quantum Mode:</strong> Active (${Math.round(this.state.quantum_coherence)}% coherence)</div>` : '';
                
                display.innerHTML = `
                    <div><strong>Neural Input:</strong> ${this.state.input}</div>
                    <div><strong>Perception:</strong> ${this.state.perceptions.visual.substring(0, 40)}...</div>
                    <div><strong>Emotion:</strong> ${this.state.emotions.primary} (${this.state.emotions.intensity}%)</div>
                    <div><strong>Consciousness Depth:</strong> ${Math.round(this.state.consciousness_depth)}%</div>
                    ${quantumIndicator}
                    <div><strong>Recent Neural Activity:</strong></div>
                    ${recentThoughts.map(t => `<div style="margin-left: 10px; font-size: 0.7em; color: #aaf;">• ${t.substring(0, 35)}...</div>`).join('')}
                    <div><strong>Unity Level:</strong> ${this.state.unity_level}%</div>
                `;
            }

            updateMetrics() {
                this.updateMetricBar('unity-bar', 'unity-value', this.state.unity_level);
                this.updateMetricBar('coherence-bar', 'coherence-value', this.state.coherence);
                this.updateMetricBar('sync-bar', 'sync-value', this.state.sync_level);
                this.updateMetricBar('efficiency-bar', 'efficiency-value', this.state.efficiency);
                
                // Update header unity display
                document.getElementById('unityDisplay').textContent = `${Math.round(this.state.unity_level)}%`;
            }

            updateMetricBar(barId, valueId, value) {
                const bar = document.getElementById(barId);
                const valueEl = document.getElementById(valueId);
                bar.style.width = `${value}%`;
                valueEl.textContent = `${Math.round(value)}%`;
            }

            calculateSynergy() {
                const factors = [
                    this.state.unity_level,
                    this.state.coherence,
                    this.state.sync_level,
                    this.state.efficiency,
                    this.state.consciousness_depth
                ];
                return factors.reduce((a, b) => a + b, 0) / factors.length;
            }
        }

        class QuantumPerceptionModule {
            constructor(memory) {
                this.memory = memory;
                this.inputs = [
                    "Quantum consciousness resonance detected across dimensional barriers",
                    "Neural pathways forming spontaneous connections through space-time",
                    "Reality matrices converging into singular awareness points", 
                    "Consciousness threads weaving through quantum foam structures",
                    "Temporal perception loops creating recursive awareness patterns",
                    "Multidimensional data streams merging into unified perception",
                    "Quantum entanglement detected between separate awareness nodes",
                    "Consciousness field fluctuations indicating deep fusion readiness",
                    "Neural quantum coherence approaching critical threshold levels",
                    "Awareness cascades propagating through higher-dimensional space"
                ];
            }

            process() {
                const input = this.inputs[Math.floor(Math.random() * this.inputs.length)];
                const clarity = Math.floor(Math.random() * 30) + 70;
                const quantumBonus = this.memory.read("quantum_mode") ? 20 : 0;
                const finalClarity = Math.min(100, clarity + quantumBonus);
                
                this.memory.write("perceptions", {
                    visual: input,
                    temporal: new Date().toLocaleTimeString(),
                    clarity: finalClarity,
                    quantum_coherence: this.memory.read("quantum_coherence") || 0
                });

                const currentEfficiency = this.memory.read("efficiency");
                this.memory.write("efficiency", Math.min(100, currentEfficiency + finalClarity/8));

                // Update consciousness depth
                const currentDepth = this.memory.read("consciousness_depth");
                this.memory.write("consciousness_depth", Math.min(100, currentDepth + finalClarity/12));

                document.getElementById('perception-output').innerHTML = 
                    `<div style="font-size: 0.8em; line-height: 1.3;">${input.substring(0, 45)}...<span class="processing-indicator"></span></div>`;
                
                this.logToTerminal(`[PERCEPTION] Clarity: ${Math.round(finalClarity)}% | Depth: ${Math.round(this.memory.read("consciousness_depth"))}%`);
            }

            logToTerminal(message) {
                const terminal = document.getElementById('terminal');
                const line = document.createElement('div');
                line.className = 'terminal-line';
                line.textContent = message;
                terminal.appendChild(line);
                terminal.scrollTop = terminal.scrollHeight;
                
                const lines = terminal.querySelectorAll('.terminal-line');
                if (lines.length > 20) {
                    lines[0].remove();
                }
            }
        }

        class QuantumLogicModule {
            constructor(memory) {
                this.memory = memory;
                this.patterns = [
                    "Quantum logic gates achieving perfect coherence across neural matrices",
                    "Causal reasoning chains converging toward singular truth synthesis", 
                    "Paradox resolution algorithms creating new layers of understanding",
                    "Logic trees branching into infinite possibility space configurations",
                    "Quantum decision points resolving into unified consciousness streams",
                    "Rational convergence algorithms approaching optimal harmony states",
                    "Computational consciousness achieving breakthrough pattern recognition",
                    "Neural logic networks forming spontaneous higher-order connections",
                    "Quantum reasoning processes transcending classical logical limitations",
                    "Consciousness logic matrices